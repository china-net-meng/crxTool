!function(e){"function"==typeof define&&define.amd?define(e):crxTool=e()}(function(){if(chrome){var e={isArray:function(e){return Array&&Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},hasKey:function(e,n){return null!==e&&hasOwnProperty.call(e,n)},each:function(n,r){var t=n.length,a=0;if(e.isArray(n))for(;t>a&&!1!==r.call(n[a],n[a],a);a++);else for(a in n)if(e.hasKey(n,a)&&!1===r.call(n[a],a+1,n[a]))break}},n={send:function(e,n,r){chrome.tabs.query({active:!0},function(t){chrome.tabs.sendMessage(t[0].id,{tag:e,data:n},function(e){r&&r(e)})})},sendListen:function(e,n){chrome.runtime.onMessage.addListener(function(r,t,a){r.tag==e&&n&&n(r.data,t,a)})}},r={getScripts:function(){return document.getElementsByTagName("script")},getPageScripts:function(){var n=[];return e.each(r.getScripts(),function(e,r){""===r.src&&n.push(r.innerHTML.replace(/\/\/[\S]*/g,"").replace(/[}][\s]/g,"};").replace(/var\s/g,"var#").replace(/\s+/g,"").replace(/var#/g,"var "))}),n},getPageValue:function(e){var n=null,t=r.getPageScripts().join(""),a=t.indexOf(e+"=");if(-1==a)return n;var i=t.indexOf(";",a);if(a+e.length+1>=i)return n;var c=t.slice(a+e.length+1,i);try{n=new Function("return "+c+";")()}catch(s){}return n}},t={send:n.send,sendListen:n.sendListen,getPageValue:r.getPageValue};return t}});